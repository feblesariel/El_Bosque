<!DOCTYPE html>
<html lang="en">

<%-include("./partials/head.ejs")%>

<body>
    <!-- ##### Header Area Start ##### -->
    <%-include("./partials/header.ejs")%>
    <!-- ##### Right Side Cart Area ##### -->
    <%-include("./partials/sideCart.ejs")%>

    <!-- ##### Single Product Details Area Start ##### -->
    <section class="single_product_details_area d-flex align-items-center">

        <% if (Product) { %>

            <!-- Single Product Thumb -->
            <div class="single_product_thumb clearfix">
                <div class="product_thumbnail_slides owl-carousel">
                    <% Product.Product_image.forEach(image => { %>
                        <img src="/img/product-img/<%=image.url%>" alt="">
                    <% }) %>
                </div>
            </div>

            <!-- Single Product Description -->
            <div class="single_product_desc clearfix">
                <span><%=Product.Category.name %></span>
                <h2><%=Product.name %></h2>
                <p class="product-price">$<%=Product.price %></p>
                <p class="product-desc"><%=Product.description %></p>

                <!-- Form -->
                <form class="cart-form clearfix" method="post">
                    <!-- Select Box -->
                    <div class="select-box d-flex mt-50 mb-30">

                        <% const optionTypes = {}; %>
                        <% Product.Product_option.forEach(item => { %>
                            <% if (!optionTypes[item.option_type]) { %>
                                <% optionTypes[item.option_type] = []; %>
                            <% } %>
                            <% optionTypes[item.option_type].push(item.option_value); %>
                        <% }) %>
                        
                        <% for (const optionType in optionTypes) { %>
                            <select name="select" id="<%=optionType %>" class="mr-5">
                                <option value="" disabled selected><%=optionType %></option>
                                <% optionTypes[optionType].forEach(optionValue => { %>
                                    <option value="<%= optionValue %>"><%=optionValue %></option>
                                <% }) %>
                            </select>
                        <% } %>                        

                    </div>
                    <!-- Cart & Favourite Box -->
                    <div class="cart-fav-box d-flex align-items-center">
                        <!-- Cart -->
                        <button type="submit" name="addtocart" value="5" class="btn essence-btn">AÃ±adir al carrito</button>
                    </div>
                </form>

            </div>

        <% } %>

    </section>
    <!-- ##### Single Product Details Area End ##### -->

    <!-- ##### Footer Area Start ##### -->
    <%-include("./partials/footer.ejs")%>

    <!-- jQuery (Necessary for All JavaScript Plugins) -->
    <script src="/js/jquery/jquery-2.2.4.min.js"></script>
    <!-- Popper js -->
    <script src="/js/popper.min.js"></script>
    <!-- Bootstrap js -->
    <script src="/js/bootstrap.min.js"></script>
    <!-- Plugins js -->
    <script src="/js/plugins.js"></script>
    <!-- Classy Nav js -->
    <script src="/js/classy-nav.min.js"></script>
    <!-- Active js -->
    <script src="/js/active.js"></script>

</body>

</html>